<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

</head>

<body style="margin: 0;">
    <style>
        .box {
            width: 100%;
            height: 200px;
            /* position: absolute; */
            /* transition: 1s; */
            top: 0;
            left: 0;
        }
    </style>
    <div style="width: 320px;position: relative;overflow: hidden;">
        <div class="box" style="background:red;transform: translate3d(0%,0%,0);">
            <span>000000000000</span>
            <!-- <img src="gb.png" alt="" style="width: 100%;"> -->
        </div>
        <div class="box" style="background:blue;transform: translate3d(-100%,-100%,0)">
            <span>111111111111</span>
            <!-- <img src="it.png" alt="" style="width: 100%;"> -->
        </div>
        <div class="box" style="background:green;transform: translate3d(-100%,-200%,0)">
            <span>22222</span>
            <!-- <img src="it.png" alt="" style="width: 100%;"> -->
        </div>
    </div>
    <script>
        let start_x;
        let start_y;
        let moveIndex;
        let range = 80;
        let clientWidth = document.body.clientWidth;
        let img = document.getElementsByClassName('box');
        // if (img.length < 2) { return };
        for (let i = 0; i < img.length; i++) {
            img[i].ontouchstart = function (e) {
                console.log("开始：" + e.changedTouches[0].clientX)
                start_x = e.changedTouches[0].clientX
                start_y = e.changedTouches[0].clientY;
            };
            img[i].ontouchmove = function (e) {
                e.stopPropagation();
                e.preventDefault();
                let moveX = e.changedTouches[0].clientX - start_x;
                let moveY = e.changedTouches[0].clientY - start_y;
                if (Math.abs(moveY) < Math.abs(moveX)) {
                    //  Y轴移动小于X轴 判定为横向滑动

                    if (moveX >= 0) {
                        moveIndex = i === 0 ? img.length - 1 : i - 1;
                        this.style.transform = `translate3d(${moveX}px,${-(i * 100)}%, 0)`;
                        this.parentNode.children[moveIndex].style.transform = `translate3d(${-(clientWidth - moveX)}px,${-(moveIndex * 100)}%,0)`;
                    } else {
                        moveIndex = i === img.length - 1 ? 0 : i + 1;
                        if (moveIndex === 1) {
                            this.parentNode.children[moveIndex].style.transform = `translate3d(100%,${-(moveIndex * 100)}%,0)`;
                        }
                        this.style.transform = `translate3d(${moveX}px,${-(i * 100)}%, 0)`;
                        this.parentNode.children[moveIndex].style.transform = `translate3d(${(clientWidth - Math.abs(moveX))}px,${-(moveIndex * 100)}%,0)`;
                    }

                } else if (Math.abs(moveY) > Math.abs(moveX)) {

                    //  Y轴移动大于X轴 判定为纵向滑动
                    // if (moveY > 0) {

                    // } else if (moveY < 0) {

                    // }
                }

                console.log("开始：" + e.changedTouches[0].clientX);
            };
            img[i].ontouchend = function (e) {
                for (let a = 0; a < img.length; a++) {
                    img[a].style.transition = "0.3s";
                }
                let moveX = e.changedTouches[0].clientX - start_x;
                let moveY = e.changedTouches[0].clientY - start_y;
                // console.log("结束：" + moveX)
                if (Math.abs(moveY) < Math.abs(moveX)) {
                    // Y轴移动小于X轴 判定为横向滑动
                    if (moveX >= range) {
                        this.style.transform = `translate3d(100%,${-(i * 100)}%,0)`;
                        this.parentNode.children[moveIndex].style.transform = `translate3d(0%,${-(moveIndex * 100)}%,0)`;
                    } else if (moveX < range && moveX >= 0 || moveX > -range && moveX < 0) {
                        this.style.transform = `translate3d(0%,${-(i * 100)}%,0)`;
                        if (moveX > -range && moveX < 0) {
                            this.parentNode.children[moveIndex].style.transform = `translate3d(100%,${-(moveIndex * 100)}%,0)`;
                        } else {
                            this.parentNode.children[moveIndex].style.transform = `translate3d(-100%,${-(moveIndex * 100)}%,0)`;
                        }

                    } else if (moveX < -range && moveX < 0) {
                        this.style.transform = `translate3d(-100%,${-(i * 100)}%,0)`;
                        this.parentNode.children[moveIndex].style.transform = `translate3d(0%,${-(moveIndex * 100)}%,0)`;
                    }

                }
                else if (Math.abs(moveY) > Math.abs(moveX)) {
                    // Y轴移动大于X轴 判定为纵向滑动
                    if (moveY >= 50) {
                        console.log("跳转下一个！")
                    } else if (moveY < 50 && moveY >= 0 || moveY > -50 && moveY < 0) {
                        console.log("保持原状！")
                    } else if (moveY < -50 && moveY < 0) {
                    }
                }
                setTimeout(() => {
                    for (let a = 0; a < img.length; a++) {
                        img[a].style.transition = "none";
                    }
                }, 300);
            };
        }

    </script>
</body>

</html>